parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"dkeB":[function(require,module,exports) {
module.exports="egg1.3860cddb.png";
},{}],"LWPS":[function(require,module,exports) {
module.exports="egg2.73e42f8f.png";
},{}],"P0HJ":[function(require,module,exports) {
module.exports="egg3.71f2e5a3.png";
},{}],"FiyQ":[function(require,module,exports) {
module.exports="egg4.6a68add4.png";
},{}],"tQR0":[function(require,module,exports) {
module.exports="egg5.f75968a3.png";
},{}],"n3w2":[function(require,module,exports) {
module.exports="egg6.ef047717.png";
},{}],"C8fm":[function(require,module,exports) {
module.exports="egg7.ca4bebd6.png";
},{}],"IPMr":[function(require,module,exports) {
module.exports="plate.baf0601d.png";
},{}],"dgmn":[function(require,module,exports) {
module.exports="player.a5fa49f6.png";
},{}],"iBVJ":[function(require,module,exports) {
module.exports={egg1:require("./egg1.png"),egg2:require("./egg2.png"),egg3:require("./egg3.png"),egg4:require("./egg4.png"),egg5:require("./egg5.png"),egg6:require("./egg6.png"),egg7:require("./egg7.png"),plate:require("./plate.png"),player:require("./player.png")};
},{"./egg1.png":"dkeB","./egg2.png":"LWPS","./egg3.png":"P0HJ","./egg4.png":"FiyQ","./egg5.png":"tQR0","./egg6.png":"n3w2","./egg7.png":"C8fm","./plate.png":"IPMr","./player.png":"dgmn"}],"nnVR":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PLATE=exports.PLAYER=exports.CHARACTER=exports.board=exports.LOWER_SHELL=exports.UPPER_SHELL=exports.VACANT_COLOR=exports.VACANT=exports.SQY=exports.SQX=exports.COL=exports.ROW=exports.canvasEl=void 0;var t=e(require("../images/*.png"));exports.canvasEl=document.getElementById("canvas"),exports.ROW=9,exports.COL=4,exports.SQX=64,exports.SQY=52,exports.VACANT=t.default.egg5,exports.VACANT_COLOR="#C7DFE0",exports.UPPER_SHELL=t.default.egg6,exports.LOWER_SHELL=t.default.egg7,exports.board=[],exports.CHARACTER=[t.default.egg1,t.default.egg2,t.default.egg3,t.default.egg4,t.default.egg6,t.default.egg7],exports.PLAYER=t.default.player,exports.PLATE=t.default.plate;
},{"../images/*.png":"iBVJ"}],"z9H4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wait=exports.lockedH=exports.getNumber=void 0;var e=require("./const");exports.getNumber=function(){var e;do{e=Math.floor(4*Math.random())+0}while(e===exports.getNumber.last);return exports.getNumber.last=e,e},exports.lockedH=function(r){for(var t,o=r+2,s=!1,u=1;u<e.ROW;u++){for(var n=r;n<o;n++)if(e.board[u][n]!==e.VACANT){t=u,s=!0;break}if(s)break}return t},exports.wait=function(e){return new Promise(function(r){return setTimeout(r,e)})};
},{"./const":"nnVR"}],"w8NT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Canvas=void 0;var a=require("./const"),t=function(){function t(){}return t.drawSquare=function(t,r,e){var o=this,n=new Image;n.src=e,n.onload=function(){o.ctx.drawImage(n,t*a.SQX,r*a.SQY,a.SQX,a.SQY),o.ctx.beginPath(),o.ctx.moveTo(0,a.SQY),o.ctx.lineTo(4*a.SQX,a.SQY),o.ctx.strokeStyle="#555555",o.ctx.stroke()}},t.moveLeft=function(r,e,o){var n,c=this,i=0,d=new Image;d.src=o,d.onload=function(){n=window.setInterval(function(){i<=1?(t.drawSquare(r-i,e,a.VACANT),c.ctx.drawImage(d,(r-i)*a.SQX,e*a.SQY)):(clearInterval(n),c.ctx.drawImage(d,(r-1)*a.SQX,e*a.SQY)),i+=.4},30)}},t.moveRight=function(r,e,o){var n,c=this,i=0,d=new Image;d.src=o,d.onload=function(){n=window.setInterval(function(){i<=1?(t.drawSquare(r+i,e,a.VACANT),c.ctx.drawImage(d,(r+i)*a.SQX,e*a.SQY)):(clearInterval(n),c.ctx.drawImage(d,(r+1)*a.SQX,e*a.SQY)),i+=.4},30)}},t.drawBoard=function(r){void 0===r&&(r=0);for(var e=r;e<a.ROW;e++)for(var o=0;o<a.COL;o++)t.drawSquare(o,e,a.board[e][o])},t.drawPlate=function(){var t=this;this.ctx.fillStyle=a.VACANT_COLOR,this.ctx.fillRect(0,9*a.SQY,a.COL*a.SQX,a.SQY);var r=new Image;r.src=a.PLATE,r.onload=function(){t.ctx.drawImage(r,0*a.SQX,9.1*a.SQY),t.ctx.drawImage(r,3*a.SQX,9.1*a.SQY)}},t.swap=function(r,e,o){for(var n=o+1,c=[],i=[],d=e;d<n;d++)for(var S=r;S<a.ROW;S++)e===d?(c.push(a.board[S][d]),t.moveRight(d,S,a.board[S][d])):(i.push(a.board[S][d]),t.moveLeft(d,S,a.board[S][d]));var s=i.concat(c),v=0;for(d=e;d<n;d++)for(S=r;S<a.ROW;S++)a.board[S][d]=s[v],v++;c=[],i=[]},t.ctx=a.canvasEl.getContext("2d"),t}();exports.Canvas=t;
},{"./const":"nnVR"}],"rsAd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Global=void 0;var e=function(){function e(){}return e.pieces=[],e.waiting=[],e.gameOver=!1,e.pauseDisabled=!1,e.done=!1,e.standbyFlag=!0,e.dropStart=Date.now(),e.score=0,e.preventKey=!1,e}();exports.Global=e;
},{}],"TxbO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Score=void 0;var e=require("./global"),o=function(){function o(){}return o.count=function(t){0===t?e.Global.score=0:e.Global.score+=t,o.els[0].textContent=""+e.Global.score,o.els[1].textContent=""+e.Global.score},o.els=document.getElementsByClassName("score"),o}();exports.Score=o;
},{"./global":"rsAd"}],"YqID":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GameOver=void 0;var e=function(){function e(){}return e.show=function(){e.panel.style.display="block"},e.hide=function(){e.panel.style.display="none"},e.panel=document.getElementById("game-over"),e}();exports.GameOver=e;
},{}],"meKA":[function(require,module,exports) {
"use strict";var t=this&&this.__awaiter||function(t,e,r,i){return new(r||(r=Promise))(function(o,a){function n(t){try{h(i.next(t))}catch(e){a(e)}}function s(t){try{h(i.throw(t))}catch(e){a(e)}}function h(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(n,s)}h((i=i.apply(t,e||[])).next())})},e=this&&this.__generator||function(t,e){var r,i,o,a,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){n=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(6===a[0]&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=e.call(t,n)}catch(s){a=[6,s],i=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Piece=void 0;var r=require("./const"),i=require("./canvas"),o=require("./global"),a=require("./util"),n=require("./score"),s=require("./gameover"),h=function(){function h(t,e,r){this.image=r,this.x=t,this.y=e}return h.prototype.draw=function(){i.Canvas.drawSquare(this.x,this.y,this.image)},h.prototype.unDraw=function(){i.Canvas.drawSquare(this.x,this.y,r.VACANT)},h.prototype.left=function(){this.collision(-1,0)||(i.Canvas.moveLeft(this.x,this.y,this.image),this.x--)},h.prototype.right=function(){this.collision(1,0)||(i.Canvas.moveRight(this.x,this.y,this.image),this.x++)},h.prototype.eggArr=function(){for(var t,e=this.y+1,i=[],o=e;o<r.ROW;o++)if(r.board[o][this.x]===r.LOWER_SHELL){t=o;break}if(t)for(o=e;o<=t;o++)i.push(o);return i},h.prototype.hatch=function(s){return t(this,void 0,Promise,function(){var t,h,u,c;return e(this,function(e){switch(e.label){case 0:cancelAnimationFrame(o.Global.anim),s.pop(),t=0,h=s,e.label=1;case 1:return t<h.length?(u=h[t],c=this.y+1,this.unDraw(),i.Canvas.drawSquare(this.x,c,r.VACANT),r.board[this.y][this.x]=r.VACANT,r.board[c][this.x]=r.VACANT,this.y++,this.draw(),n.Score.count(5),[4,a.wait(400)]):[3,4];case 2:e.sent(),c===u&&(this.unDraw(),i.Canvas.drawSquare(this.x,this.y+1,r.VACANT),r.board[this.y+1][this.x]=r.VACANT,o.Global.dropStart=Date.now(),n.Score.count(5)),e.label=3;case 3:return t++,[3,1];case 4:return[4,a.wait(200)];case 5:return e.sent(),o.Global.preventKey=!1,[2]}})})},h.prototype.checkLower=function(){var t=this.y+1;t<r.ROW?r.board[t][this.x]===this.image?(this.unDraw(),i.Canvas.drawSquare(this.x,t,r.VACANT),r.board[this.y][this.x]=r.VACANT,r.board[t][this.x]=r.VACANT,n.Score.count(1)):r.board[this.y][this.x]===r.UPPER_SHELL&&(0===this.eggArr().length?(this.unDraw(),r.board[this.y][this.x]=r.VACANT):1===this.eggArr().length?(this.unDraw(),r.board[this.y][this.x]=r.VACANT,i.Canvas.drawSquare(this.x,this.y+1,r.VACANT),r.board[this.y+1][this.x]=r.VACANT,n.Score.count(1)):(o.Global.preventKey=!0,this.hatch(this.eggArr()))):t>=r.ROW&&r.board[this.y][this.x]===r.UPPER_SHELL&&(this.unDraw(),r.board[this.y][this.x]=r.VACANT)},h.prototype.down=function(){var t=this;if(this.collision(0,1)){this.lock(),this.checkLower();for(var e=0;e<r.COL;e++)r.board[0][e]!==r.VACANT&&(o.Global.gameOver=!0,o.Global.pauseDisabled=!0,s.GameOver.show());o.Global.pieces=o.Global.pieces.filter(function(e){return e!==t})}else this.unDraw(),this.y++,this.draw()},h.prototype.collision=function(t,e){var i=this.x+t,o=this.y+e;return i<0||i>=r.COL||o>=r.ROW||r.board[o][i]!==r.VACANT},h.prototype.lock=function(){r.board[this.y][this.x]=this.image},h}();exports.Piece=h;
},{"./const":"nnVR","./canvas":"w8NT","./global":"rsAd","./util":"z9H4","./score":"TxbO","./gameover":"YqID"}],"dspW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ready=void 0;var e=require("./global");exports.ready=function(){e.Global.pieces=[],e.Global.pieces=e.Global.waiting,e.Global.done=!1};
},{"./global":"rsAd"}],"pP3Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Player=void 0;var t=require("./const"),e=function(){function e(e){void 0===e&&(e=1),this.ctx=t.canvasEl.getContext("2d"),this.x=e,this.draw()}return Object.defineProperty(e.prototype,"xLeft",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"xRight",{get:function(){return this.x+1},enumerable:!1,configurable:!0}),e.prototype.draw=function(){var e=this,r=new Image;r.src=t.PLAYER,r.onload=function(){e.ctx.drawImage(r,e.x*t.SQX,9.1*t.SQY)}},e.prototype.unDraw=function(e){var r=this;void 0===e&&(e=!0),this.ctx.fillStyle=t.VACANT_COLOR,this.ctx.fillRect(this.x*t.SQX,9*t.SQY,2*t.SQX,t.SQY);var i=new Image;i.src=t.PLATE,i.onload=function(){e?r.ctx.drawImage(i,(r.x+2)*t.SQX,9.1*t.SQY):r.ctx.drawImage(i,(r.x-1)*t.SQX,9.1*t.SQY)}},e.prototype.left=function(){this.x>0&&(this.unDraw(!0),this.x--,this.draw())},e.prototype.right=function(){this.x<t.COL-2&&(this.unDraw(!1),this.x++,this.draw())},e.prototype.swap=function(){var e=this,r=.4,i=new Image;i.src=t.PLAYER,i.onload=function(){setInterval(function(){var n=i.width*r;r<=1&&(e.ctx.fillStyle=t.VACANT_COLOR,e.ctx.fillRect(e.x*t.SQX,9*t.SQY,2*t.SQX,t.SQY),e.ctx.drawImage(i,(e.x+1)*t.SQX-n/2,9.1*t.SQY,n,i.height)),r+=.2},30)}},e}();exports.Player=e;
},{"./const":"nnVR"}],"gXOT":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function l(e){try{s(r.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,l)}s((r=r.apply(e,t||[])).next())})},t=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(l){o=[6,l],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};Object.defineProperty(exports,"__esModule",{value:!0});var n=require("./const"),r=require("./util"),a=require("./canvas"),o=require("./global"),i=require("./piece"),l=require("./ready"),s=require("./player"),c=require("./score"),u=require("./gameover"),d=[[0,1],[0,2],[0,3],[0,1,2,3],[1,2],[1,3],[2,3]],p=function(){function p(){var e=this;this.startBtn=document.getElementById("startBtn"),this.newGameBtn=document.getElementById("newGameBtn"),this.pauseBtn=document.getElementById("pauseBtn"),this.resumeBtn=document.getElementById("resumeBtn"),this.swapBtn=document.getElementById("btn-swap"),this.leftBtn=document.getElementById("btn-left"),this.rightBtn=document.getElementById("btn-right"),this.downBtn=document.getElementById("btn-down"),document.addEventListener("keydown",function(t){return e.keydown(t)})}return p.prototype.init=function(){var e=this;o.Global.gameOver=!0,this.startBtn.addEventListener("click",function(){return e.start()}),this.newGameBtn.addEventListener("click",function(){return e.newGame()}),this.pauseBtn.addEventListener("click",function(){return e.pause()}),this.resumeBtn.addEventListener("click",function(){return e.resume()}),this.swapBtn.addEventListener("click",function(){return e.swapCtrl()}),this.leftBtn.addEventListener("click",function(){return e.leftCtrl()}),this.rightBtn.addEventListener("click",function(){return e.rightCtrl()}),this.downBtn.addEventListener("click",function(){return e.downCtrl()})},p.prototype.start=function(){o.Global.gameOver=!1,this.startBtn.style.display="none",this.pauseBtn.disabled=!1,p.createBoard(),a.Canvas.drawBoard(),a.Canvas.drawPlate(),this.player=new s.Player,p.production(),p.spawn(),l.ready(),p.drop()},p.prototype.newGame=function(){this.resumeBtn.style.display="none",u.GameOver.hide(),o.Global.waiting=[],o.Global.gameOver=!1,o.Global.pauseDisabled=!1,c.Score.count(0),this.start()},p.prototype.pause=function(){o.Global.pauseDisabled||(o.Global.gameOver?this.resume():(o.Global.gameOver=!0,this.resumeBtn.style.display="block"))},p.prototype.resume=function(){o.Global.pauseDisabled||(o.Global.gameOver=!1,o.Global.anim=requestAnimationFrame(p.drop),this.resumeBtn.style.display="none")},p.prototype.keydown=function(e){switch(e.keyCode){case 37:this.leftCtrl();break;case 39:this.rightCtrl();break;case 40:this.downCtrl();break;case 32:this.swapCtrl()}},p.prototype.leftCtrl=function(){o.Global.gameOver||this.player.left()},p.prototype.rightCtrl=function(){o.Global.gameOver||this.player.right()},p.prototype.downCtrl=function(){o.Global.gameOver||o.Global.preventKey||(p.piecesDown(),o.Global.anim=requestAnimationFrame(p.drop))},p.prototype.swapCtrl=function(){if(!o.Global.gameOver&&!o.Global.preventKey){var e=r.lockedH(this.player.xLeft);e&&(a.Canvas.swap(e,this.player.xLeft,this.player.xRight),p.swap(e,this.player.xLeft,this.player.xRight)),this.player.swap()}},p.createBoard=function(){for(var e=0;e<n.ROW;e++){n.board[e]=[];for(var t=0;t<n.COL;t++)n.board[e][t]=n.VACANT}},p.production=function(){for(var e=0;e<n.COL;e++)for(var t=5;t<n.ROW;t++){var a=new i.Piece(e,t,n.CHARACTER[r.getNumber()]);a.draw(),a.lock()}},p.test1=function(){for(var e=1;e<n.COL-1;e++)for(var t=4;t<n.ROW;t++){var a=new i.Piece(e,t,n.CHARACTER[r.getNumber()]);a.draw(),a.lock()}},p.test2=function(){for(var e=[5,2,3,5],t=0;t<e.length;t++){var r=new i.Piece(1,t+5,n.CHARACTER[e[t]]);r.draw(),r.lock()}var a=new i.Piece(3,8,n.CHARACTER[1]);a.draw(),a.lock()},p.test3=function(){for(var e=1;e<n.COL-1;e++)for(var t=1;t<n.ROW;t++){var a=new i.Piece(e,t,n.CHARACTER[r.getNumber()]);a.draw(),a.lock()}},p.drop=function(){Date.now()-o.Global.dropStart>1e3&&(p.piecesDown(),o.Global.dropStart=Date.now()),o.Global.gameOver||(o.Global.anim=requestAnimationFrame(p.drop))},p.standby=function(){if(!o.Global.done){o.Global.waiting=[];var e=Math.floor(Math.random()*d.length);d[e].forEach(function(e){var t=Math.floor(Math.random()*n.CHARACTER.length),r=new i.Piece(e,0,n.CHARACTER[t]);r.draw(),o.Global.waiting.push(r)}),o.Global.done=!0}},p.piecesDown=function(){o.Global.gameOver||(o.Global.pieces.forEach(function(e){o.Global.standbyFlag&&(p.spawn(),o.Global.standbyFlag=!1),e.down()}),0===o.Global.pieces.length&&(a.Canvas.drawBoard(1),l.ready(),o.Global.standbyFlag=!0))},p.spawn=function(){return e(this,void 0,Promise,function(){return t(this,function(e){switch(e.label){case 0:return[4,r.wait(200)];case 1:return e.sent(),p.standby(),[2]}})})},p.swap=function(e,t,n){o.Global.pieces.forEach(function(r){r.y>=e&&(t===r.x&&r.right(),n===r.x&&r.left())})},p}(),f=new p;f.init();
},{"./const":"nnVR","./util":"z9H4","./canvas":"w8NT","./global":"rsAd","./piece":"meKA","./ready":"dspW","./player":"pP3Y","./score":"TxbO","./gameover":"YqID"}]},{},["gXOT"], null)